<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{requestmodule/fragments/header :: header(datatables = true)}"></head>
<body class="top-navigation layout-fixed">
<div id="wrapper">
    <div id="page-wrapper" class="gray-bg">
        <div th:replace="~{requestmodule/fragments/topbar :: topbar(page = 'pendingRequests')}"></div>
        <div class="wrapper wrapper-content">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-title">
                            <h3>
                                <em class="fa fa-list"></em> &nbsp
                                <span th:text="#{requestmodule.html.pending.title}"></span>
                            </h3>

                        </div>

                        <div class="ibox-content">
                            <table id="pendingRequestTable"
                                   class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr >
                                    <!-- <th></th> -->
                                    <th th:text="#{requestmodule.html.pending.table.header.reciever}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.action}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.requester}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.rolename}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.system}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.description}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.requestdate}"></th>
                                    <th th:text="#{requestmodule.html.pending.table.header.reason}"></th>
                                    <th th:text="#{html.navbar.actions}"></th>
                                </tr>
                                </thead>

                                <tbody>
                                <tr th:each="request : ${pendingRequests}" th:id="${request.id+'_pending_request'}" class="dt-control">
                                    <!-- <td class="dt-control"></td> -->
                                    <td th:text="${request.reciever}"></td>
                                    <td th:text="#{__${request.action}__}"></td>
                                    <td th:text="${request.requester}"></td>
                                    <td th:text="${request.roleName}"></td>
                                    <td th:text="${request.itSystem}"></td>
                                    <td th:text="${request.description}"></td>
                                    <td th:text="${request.requestDate}"></td>
                                    <td th:text="${request.reason}"></td>
                                    <td>
										<button class="btn btn-primary" style="width: 100%" th:attr="onclick='onApprovePressed('+${request.id}+');'" th:text="#{requestmodule.html.pending.table.details.approve} + ' ' + ${#strings.toLowerCase(#messages.msg(request.action))}"></button>
										<button class="btn btn-danger" style="width: 100%; margin-top: 5px;" th:attr="onclick='onDenyPressed('+${request.id}+');'" th:text="#{requestmodule.html.pending.table.details.deny}"></button>
									</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{requestmodule/fragments/footer :: scripts(datatables = true)}"></div>

<script th:inline="javascript">
    /*<![CDATA[*/
    /*[+
       var token = $("meta[name='_csrf']").attr("content");
        let detailsUrl = [[@{/ui/request/pending/details}]];
        let restUrl = [[@{/rest/rolerequest}]];
    +]*/



    /*]]>*/
</script>
<script th:src="@{/js/rolerequest/pendingRequests/pending.js}"></script>
</body>
</html>
